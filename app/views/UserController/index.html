#{extends 'main_templeate.html' /} #{set title: user.name + " " + user.lastName /}
%{
	boolean currentAdminGroup = utils.SessionHelper.getCurrentUser(session)?.role == models.User.ROLE_GROUP_ADMIN;
	boolean otherUser = utils.SessionHelper.getCurrentUser(session)?.id != user?.id;
	boolean groupAdmin = (utils.SessionHelper.getCurrentUser(session)?.id == user?.id) && (utils.SessionHelper.getCurrentUser(session)?.role == models.User.ROLE_GROUP_ADMIN);
	boolean haveGroupOrInviteJoin = (utils.SessionHelper.getCurrentUser(session)?.command != null) || (utils.SessionHelper.getCurrentUser(session)?.commandToInvite != null);
%}
#{if otherUser}
<div class="profile-user-name"> 

                    ${user.name + " " + user.lastName}
                    <em>&{'page.profile.age'} ${user.age}</em>
                </div>

                <div class="profile-user-info">
                	#{avatar.avatar user:user, cssClass:'profile-user-info-pic', maleImg:'avabigm.jpg', femaleImg:'avabigf.jpg', avatarSize:123 /}
                    <div><a href="#">&{'models.country.name.' + utils.ModelUtils.replaceSpacesForI18n(user?.country?.name)}</a> / <a href="#">${user?.city}</a></div>
                    <div><span>&{'page.profile.lastseen'}:</span> <em>#{common.formattedDate date:user?.lastSeen /}</em></div>
                    <div><span>&{'page.profile.email'}:</span> #{if user.showEmailForOthers} ${user.email} #{/if} #{else}&{'page.profile.hide_email'}#{/else}</div>
                    <div><span>&{'page.profile.business'}:</span> <a href="#">&{'models.bType.name.' + utils.ModelUtils.replaceSpacesForI18n(user?.businessType?.name)}</a> / <a href="#">&{'models.bSphere.name.' + utils.ModelUtils.replaceSpacesForI18n(user?.businessSphere?.name)}</a></div>
                    <div class="profile-user-info-btn">
                        <a href="#">&{'page.profile.sendmsg'}</a>
                        #{if currentAdminGroup}
                        	<a href="" onclick="$('.sendNotif').show(); return false;">&{'page.profile.add_to_team'}</a>
                        #{/if}
                    </div>
                    <div class="sendNotif"  style="display: none">
						<div class="overlay"></div>
						<div class="popup">
							<h2>&{'page.profile.add_to_team'}</h2>
							#{form @GroupController.joinMyGroup()}
							 <input name="userForJoinId" value="${user.id}" type="hidden"> 
							 <input name="groupId" value="${utils.SessionHelper.getCurrentUser(session).command?.id}" type="hidden"> 
							 <div class="profile-item clearFix popup-formtxt ">
								 	<textarea name="text" cols="30" rows="5" class="mt15"></textarea>
								 </div>
								 <input type="submit" value="&{'page.profile.add_button'}">
							<a href=""  onclick="$('.sendNotif').hide(); return false;" class="cancel">&{'page.profile.cancel'}</a>
							#{/form}
						</div>
					</div>
                </div>
                <div class="user-info-rate clearFix">
                    <div>
                        <strong>${user.businessman}</strong>
                        &{'businessman'}
                    </div>
                    <div>
                        <strong>${user.idealist}</strong>
                        &{'idealist'}
                    </div>
                    <div>
                       	<strong>${user.communicant}</strong>
                       &{'communicant'}
                    </div>
                    <div>
                        <strong>${user.pragmatist}</strong>
                         &{'pragmatist'}
                    </div>
                </div>
                <div class="user-info-ttl">&{'page.profile.personal_characteristics'}</div>
                <div class="user-info">
                    <pre>${user.personalCV}</pre>
                </div>
                <div class="group-consist-ttl">&{'page.profile.team'}</div>
                <div class="group-consist">
                    <h4><a href="@{GroupController.index(user.command?.id)}">${user.command?.name}</a></h4>
                    #{if user.command != null}
                    <div class="founder">&{'page.profile.founder'}: <a href="@{UserController.index(user.command?.founderUser?.id)}" class="man">${user.command?.founderUser?.name + " " + user.command?.founderUser?.lastName}</a></div>
                    #{/if}
                </div>
                <div class="group-vacancies-ttl">&{'page.profile.prof_skills'}</div>
                <div class="group-vacancies">
                
                	<div class="group-vacancies-item">
                    	<div class="group-vacancies-name">&{'page.profile.en_skill'} <span>&#8594;</span>#{if user.english} &{'page.common.yes'} #{/if} #{else} &{'page.common.no'} #{/else}</div>
                    </div>
                	<div class="group-vacancies-item">
                    	<div class="group-vacancies-name">&{'page.profile.marketing_advertising'} <span>&#8594;</span>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(user.expMarketing?.level?.userLevel)}</div>
                        <pre>${user?.expMarketing?.description}</pre>
                    </div>
                    <div class="group-vacancies-item">
                    	<div class="group-vacancies-name">&{'page.profile.management_experience'} <span>&#8594;</span>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(user.expManagement?.level?.userLevel)}</div>
                        <pre>${user?.expManagement?.description}</pre>
                    </div>
                    <div class="group-vacancies-item">
                    	<div class="group-vacancies-name">&{'page.profile.sales_experience'} <span>&#8594;</span> &{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(user.expSale?.level?.userLevel)}</div>
                        <pre>${user?.expSale?.description}</pre>
                    </div>
                    <div class="group-vacancies-item">
                    	<div class="group-vacancies-name">&{'page.profile.finance_experience'}<span>&#8594;</span> &{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(user.expFinance?.level?.userLevel)}</div>
                        <pre>${user?.expFinance?.description}</pre>
                    </div>
                    <div class="group-vacancies-item">
                    	<div class="group-vacancies-name">&{'page.profile.law_experience'} <span>&#8594;</span> &{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(user.expLegal?.level?.userLevel)}</div>
                        <pre>${user?.expLegal?.description}</pre>
                    </div>
                    <div class="group-vacancies-item">
                    	<div class="group-vacancies-name">&{'page.profile.it_experience'} <span>&#8594;</span> &{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(user.expIT?.level?.userLevel)}</div>
                        <pre>${user?.expIT?.description}</pre>
                    </div>
                    <div class="group-vacancies-item">
                    	<div class="group-vacancies-name">&{'page.profile.others_experience'} <span>&#8594;</span> &{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(user.expOther?.level?.userLevel)}</div>
                        <pre>${user?.expOther?.description}</pre>
                    </div>
                </div>
#{/if}


#{else}

<h1 class="profile-h1">&{'page.profile.current.title'}</h1>
                <h2 class="profile-h2" style="margin-bottom:9px;">&{'page.profile.current.personal_data'}</h2>
                <div class="profile-form">
               
                	<div class="profile-item mb3">
						<label for="">&{'page.profile.current.name'}</label>
						${user.name}
					</div>
                    <div class="profile-item mb3">
						<label for="">&{'page.profile.current.surname'}</label>
						${user.lastName}
					</div>
                    <div class="profile-item mb3">
						<label for="">&{'page.profile.current.sex'}</label>
						#{if user.sex}
							&{'page.profile.current.male'}
						#{/if}
						#{else}
							&{'page.profile.current.female'}
						#{/else}
					</div>
					
					<div class="profile-item">
						<label for="">&{'page.profile.current.birthday'}</label>
						#{common.formattedDate date:user.birthday /}
					</div>
					
					<div class="group-info">
						<div class="group-info-ttl">Характеристика</div>
						<div class="group-info-rate clearFix">
							<div>
		                        <strong>${user.businessman}</strong>
		                        &{'businessman'}
		                    </div>
		                    <div>
		                        <strong>${user.idealist}</strong>
		                        &{'idealist'}
		                    </div>
		                    <div>
		                       	<strong>${user.communicant}</strong>
		                       &{'communicant'}
		                    </div>
		                    <div>
		                        <strong>${user.pragmatist}</strong>
		                         &{'pragmatist'}
		                    </div>
						</div>
						<div class="group-info-rate-help">* на основе данных теста</div>
					</div>
					</div>
					
					#{form @UserController.editContactData()} #{showError errors:errors /}
					<div class="create-form">
					<label for="">Электронный адрес</label>
						 ${user.email} 
						<div class="box-radio">
							<input type="radio" name="showEmailForOthers" id="showEmailForOthersY" class="radio" value="true"  #{if user?.showEmailForOthers}checked#{/if}/>
							<label for="showEmailForOthersY" class="radio-btn">Показать всем</label>
							<input type="radio" name="showEmailForOthers" id="showEmailForOthersN" class="radio" value="false"  #{if !user?.showEmailForOthers}checked#{/if}/>
							<label for="showEmailForOthersN" class="radio-btn">Скрыть от всех</label>
	                   </div>
                    </div>
                    <div class="profile-form">
                     <div class="profile-item">
 						<label for="">Мой аватар</label>
                         <div class="profile-pic">
							#{avatar.avatar user:user, cssClass:'profile-pic-img', maleImg:'avam.png', femaleImg:'avaf.png', avatarSize:55 /}
                         	<div class="profile-pic-btn" id="changeAvatar">Обзор<input name="" type="file"></div>
                         	#{avatar.changeAvatar user:user/}
                         	<div class="profile-pic-type">Максимальный размер изображения 800х600 px 2Мб (.jpg, .jpeg, .png, .gif, .bmp)</div>
                         </div>
 					</div>
                    <div class="profile-item clearFix">
						<label for="">Страна</label>
						<select name="countryId" class="cSelect" style="width:321px;">
							#{list items:utils.ModelUtils.getSortedCountries(), as:'country'}
								<option value="${country.id}" #{if user?.country?.id == country.id}selected="selected"#{/if}>&{'models.country.name.' + utils.ModelUtils.replaceSpacesForI18n(country.name)}</option>
							#{/list}
						</select>
					</div>
                    <div class="profile-item">
						<label for="">Город</label>
						<input type="text" name="city" value="${user.city}" id="" placeholder="${user.city}" />
					</div>
                    <button type="submit" class="profile-btn">Сохранить изменения</button>
                    </div>
                    #{/form}
                
                <h2 class="profile-h2">Сменить пароль</h2>
                <div class="profile-form">
                #{form @UserController.doChangePassword()}
                #{showError errors:errors /}
                    <div class="profile-item">
						<label for="">Старый пароль</label>
						<input type="password" name="oldPassword" id="" />
					</div>
                    <div class="profile-item">
						<label for="">Введите новый пароль</label>
						<input type="password" name="newPassword" id="" />
					</div>
                    <div class="profile-item">
						<label for="">Повторите новый пароль</label>
						<input type="password" name="newPasswordRepeat" id="" />
					</div>
                    <button type="submit" class="profile-btn">Сохранить изменения</button>
                 #{/form}
                </div>
                <h2 class="profile-h2">Профессиональные навыки</h2>
               
                #{form @UserController.editSkill()}
                 <div class="profile-form" style="padding-bottom:10px;">
					<div class="profile-item clearFix">
						<label for="">Интересующий тип бизнеса</label>
						<select name="currentUser.businessType.id" class="cSelect" style="width:321px;">
							#{list items:models.BType.findAll(), as:'businessType'}
								<option value="${businessType.id}" #{if user?.businessType?.id == businessType.id}selected="selected"#{/if}>&{'models.bType.name.' + utils.ModelUtils.replaceSpacesForI18n(businessType.name)}</option>
							#{/list}
						</select>
					</div>
					<div class="profile-item clearFix">
						<label for="">Интересующая сфера бизнеса</label>
						<select name="currentUser.businessSphere.id" class="cSelect" style="width:321px;">
							#{list items:models.BSphere.findAll(), as:'businessSphere'}
								<option value="${businessSphere.id}" #{if user?.businessSphere?.id == businessSphere.id}selected="selected"#{/if}>&{'models.bSphere.name.' + utils.ModelUtils.replaceSpacesForI18n(businessSphere.name)}</option>
							#{/list}
						</select>
					</div>
				</div>
				
					<div class="create-form">
						<label for="">Знание английского</label>
						<div class="box-radio">
							<input type="radio" name="currentUser.english" id="englishY" class="radio" value="true"  #{if user?.english}checked#{/if}/>
							<label for="englishY" class="radio-btn">Да</label>
							<input type="radio" name="currentUser.english" id="englishN" class="radio" value="false"  #{if !user?.english}checked#{/if}/>
							<label for="englishN" class="radio-btn">Нет</label>
	                   </div>
                    </div>
					<div class="profile-form" style="padding-bottom:10px;">
					<div class="profile-item clearFix">
						<label for="">Опыт в маркетинге/рекламе<span class="small">Необходимо выбрать уровень ваших знаний в этой сфере и описать подробнее ваш опыт</span></label>
						<select name="currentUser.expMarketing.level.id" class="cSelect" style="width:321px;">
							#{list items:models.UserLevel.findAll(), as:'level'}
								<option value="${level.id}" #{if user?.expMarketing?.level?.id == level.id}selected="selected"#{/if}>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(level?.userLevel)}</option>
							#{/list}
						</select>
						<textarea name="currentUser.expMarketing.description" placeholder="Опишите подробнее свой опыт в рекламе" class="mt15">${user?.expMarketing?.description}</textarea>
					</div>
					<div class="profile-item clearFix">
						<label for="">Опыт в продажах<span class="small">Необходимо выбрать уровень ваших знаний в этой сфере и описать подробнее ваш опыт</span></label>
						<select name="currentUser.expSale.level.id" class="cSelect" style="width:321px;">
							#{list items:models.UserLevel.findAll(), as:'level'}
								<option value="${level.id}" #{if user?.expSale?.level?.id == level.id}selected="selected"#{/if}>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(level?.userLevel)}</option>
							#{/list}
						</select>
						<textarea name="currentUser.expSale.description" placeholder="Опишите подробнее свой опыт в продажах" class="mt15">${user?.expSale?.description}</textarea>
					</div>
					<div class="profile-item clearFix">
						<label for="">Опыт в менеджменте<span class="small">Необходимо выбрать уровень ваших знаний в этой сфере и описать подробнее ваш опыт</span></label>
						<select name="currentUser.expManagement.level.id" class="cSelect" style="width:321px;">
							#{list items:models.UserLevel.findAll(), as:'level'}
								<option value="${level.id}" #{if user?.expManagement?.level?.id == level.id}selected="selected"#{/if}>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(level?.userLevel)}</option>
							#{/list}
						</select>
						<textarea name="currentUser.expManagement.description" placeholder="Опишите подробнее свой опыт в менеджменте" class="mt15">${user?.expManagement?.description}</textarea>
					</div>
					
					<div class="profile-item clearFix">
						<label for="">Опыт в юриспруденции<span class="small">Необходимо выбрать уровень ваших знаний в этой сфере и описать подробнее ваш опыт</span></label>
						<select name="currentUser.expLegal.level.id" class="cSelect" style="width:321px;">
							#{list items:models.UserLevel.findAll(), as:'level'}
								<option value="${level.id}" #{if user?.expLegal?.level?.id == level.id}selected="selected"#{/if}>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(level?.userLevel)}</option>
							#{/list}
						</select>
						<textarea name="currentUser.expLegal.description" placeholder="Опишите подробнее свой опыт в юриспруденции" class="mt15">${user?.expLegal?.description}</textarea>
					</div>
					
					<div class="profile-item clearFix">
						<label for="">Опыт в финансах<span class="small">Необходимо выбрать уровень ваших знаний в этой сфере и описать подробнее ваш опыт</span></label>
						<select name="currentUser.expFinance.level.id" class="cSelect" style="width:321px;">
							#{list items:models.UserLevel.findAll(), as:'level'}
									<option value="${level.id}" #{if user?.expFinance?.level?.id == level.id}selected="selected"#{/if}>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(level?.userLevel)}</option>
							#{/list}
						</select>
						<textarea name="currentUser.expFinance.description" placeholder="Опишите подробнее свой опыт в финансах" class="mt15">${user?.expFinance?.description}</textarea>
					</div>
					
					<div class="profile-item clearFix">
						<label for="">Опыт в программировании<span class="small">Необходимо выбрать уровень ваших знаний в этой сфере и описать подробнее ваш опыт</span></label>
						<select name="currentUser.expIT.level.id" class="cSelect" style="width:321px;">
							#{list items:models.UserLevel.findAll(), as:'level'}
								<option value="${level.id}" #{if user?.expIT?.level?.id == level.id}selected="selected"#{/if}>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(level?.userLevel)}</option>
							#{/list}
						</select>
						<textarea name="currentUser.expIT.description" placeholder="Опишите подробнее свой опыт в программировании" class="mt15">${user?.expIT?.description}</textarea>
					</div>
					
					<div class="profile-item clearFix">
						<label for="">Опыт в других направлениях<span class="small">Необходимо выбрать уровень ваших знаний в этой сфере и описать подробнее ваш опыт</span></label>
						<select name="currentUser.expOther.level.id" class="cSelect" style="width:321px;">
							#{list items:models.UserLevel.findAll(), as:'level'}
								<option value="${level.id}" #{if user?.expOther?.level?.id == level.id}selected="selected"#{/if}>&{'models.userLevel.userLevel.' + utils.ModelUtils.replaceSpacesForI18n(level?.userLevel)}</option>
							#{/list}
						</select>
						<textarea name="currentUser.expOther.description" placeholder="Опишите подробнее свой опыт в других направлениях" class="mt15">${user?.expOther?.description}</textarea>
					</div>
					
					<div class="profile-item">
						<label for="">Персональная характеристика<span class="small">Опишите свои качества.<br> Преимущества и недостатки своего характера</span></label>
						<textarea name="currentUser.personalCV" placeholder="Опишите подробнее свои качества">${user.personalCV}</textarea>
					</div>
                    <button class="profile-btn">Сохранить изменения</button>
                    </div>
                    #{/form}

#{/else}